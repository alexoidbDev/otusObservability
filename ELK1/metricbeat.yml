
metricbeat.config.modules:
 path: ${path.config}/modules.d/*.yml
 reload.enabled: false


metricbeat.modules:
- module: mysql
  metricsets:
    - status
    - performance
  period: 10s
  hosts: ["monitor:monitorPaSS@tcp(mysite.local:3306)/"]

- module: nginx
  enabled: true
  metricsets: ["stubstatus"]
  hosts: ["http://mysite.local"]
  server_status_path: "nginx_status"
  period: 10s

- module: system
  metricsets:
    - cpu
    - load
    - memory
    - network
    - process
    - process_summary
    - uptime
    - socket_summary
  enabled: true
  period: 10s
  processes: ['.*']
  cpu.metrics:  ["percentages","normalized_percentages"]
  core.metrics: ["percentages"]
  hostfs: "/hostfs"
  process.include_top_n:
    enabled: true
    by_cpu: 10
    by_memory: 10


processors:
 - add_host_metadata: ~
 - add_docker_metadata: ~

output.elasticsearch:
 hosts: ${ELASTIC_HOSTS}
#  username: ${ELASTIC_USER}
#  password: ${ELASTIC_PASSWORD}
