# Required settings
fields_under_root: true
fields.collector_node_id: ${sidecar.nodeName}
fields.gl2_source_collector: ${sidecar.nodeId}


output.logstash:
   hosts: ["graylog.local:5044"]
path:
   data: ${sidecar.spoolDir!"/var/lib/graylog-sidecar/collectors/filebeat"}/data
   logs: ${sidecar.spoolDir!"/var/lib/graylog-sidecar/collectors/filebeat"}/log

# output.file:
#   enabled: true
#   path: "/tmp"  # Directory where output files will be stored
#   filename: "filebeat_output.log" # Base name for the output file
#   rotate_every_kb: 10240 # Rotate the file when it reaches 10MB
#   number_of_files: 7 # Keep up to 7 rotated files

filebeat.inputs:
- type: filestream
  id: php-fpm
  enabled: true
  paths:
    - /var/log/php-fpm/*.log
  fields:
    app: php-fpm  
- type: filestream
  id: nginx-access
  enabled: true
  paths:
    - /var/log/nginx/*access.log*
  fields:
    app: nginx-access
- type: filestream
  id: nginx-access
  enabled: true
  paths:
    - /var/log/nginx/*error.log*
  fields:
    app: nginx-error
- type: filestream
  id: nginx-access
  enabled: true
  paths:
    - /var/log/mariadb/mariadb.log
  fields:
    app: mariadb
